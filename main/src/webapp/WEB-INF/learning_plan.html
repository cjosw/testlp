<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE">
    <title>Learning Plan</title>
    <link href="styles/lib/bootstrap/bootstrap.css" rel="stylesheet">
    <link href="styles/lib/bootstrap/bootstrap-responsive.css" rel="stylesheet">
    <link href="styles/toplevel.css" rel="stylesheet">
</head>

<body>
<script type='text/javascript' src='scripts/lib/jquery/jquery-1.11.0.min.js'></script>
<script type='text/javascript' src='scripts/lib/knockout/knockout-3.2.0.min.js'></script>
<script type='text/javascript' src='scripts/main.js'></script>
<script type='text/javascript' src='scripts/knockout-customisations.js'></script>
<script type='text/javascript' src='scripts/training.js'></script>
<script type='text/javascript' src='scripts/user.js'></script>
<script type='text/javascript' src='scripts/utils.js'></script>
<script type='text/javascript' src='scripts/testdata.js'></script>

<div class="container-fluid lp_body">

    <!-- logo is not actually required
    <div class="row lp_logo lp_logo_bar">
        <div class="col-md-1 lp_logo_content">
        </div>
        <div class="col-md-2 lp_logo_content">
            <img src="images/kallidus_logo_from_concept.png">
        </div>
        <div class="col-md-9 lp_logo_content">
        </div>
    </div>
    -->
    <div class="row lp_heading lp_heading_bar">
        <div class="col-md-1 lp_heading_content">
        </div>
        <div class="col-md-1 lp_heading_content lp_heading_image_container">
            <div class="lp_heading_cropper image-cropper">
                <img class="lp_heading_content" data-bind="src: userImageSrc()" srcxx="images/Mona_Lisa_cropped150.jpg">
            </div>
        </div>
        <div class="col-md-2 lp_heading_content">
            <table>
                <tr>
                    <div class="lp_heading_text_container" data-bind="with: learning_plan.user">
                        <span>Hi, <span data-bind="text: FirstName"></span></span>
                    </div>
                </tr>
                <tr>
                    <div class="progress lp_progress_bar_container">
                        <div class="progress-bar lp_progress_bar_background" role="progressbar"
                             aria-valuemin="0" aria-valuemax="100" style="width:100%">
                            <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"
                                 data-bind="style: { 'width': learning_plan.progress() }">
                            </div>
                        </div>
                    </div>
                </tr>
                <tr>
                    <span class="lp_heading_summary_container">
                        <span class="pull-right"><span data-bind="text: learning_plan.progress"></span></span>
                    </span>
                </tr>
            </table>
        </div>
        <div class="col-md-8 lp_heading_content">
        </div>
    </div>

    <div class="error" data-bind="visible: learning_plan.errorMessage()">
        <span data-bind="text: learning_plan.errorMessage"/>
    </div>

    <!-- ko foreach: learning_plan.category_plan -->
    <div class="lp_category_section">
        <div class="row">
            <div class="col-md-12">
                <div class="col-md-12 lp_category_section_header">
                    <!-- ko if: categoryName -->
                    <span data-bind="text: categoryName"></span>
                    <!-- /ko -->
                    <!-- ko if: !categoryName -->
                    [ No Category specified ]
                    <!-- /ko -->
                </div>
            </div>
        </div>
        <!-- ko foreach: training_data_rows -->
        <div>
        <div class="row">
            <div class="col-md-12">
                <table class="lp_course_section">
                    <tr>
                        <!-- ko foreach: courses -->
                        <td class="col-md-2">
                                <table data-bind="if: !extraTrainingInfo.blank" class="lp_course_table">
                                    <tr>
                                        <td>
                                            <img class="lp_course_summary_image" data-bind="src: imageName">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <span class="lp_course_summary_name lp_truncate" data-bind="text: Course.Summary"></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <!-- ko if: extraTrainingInfo.completed -->
                                                <span class="lp_course_fully_completed">Completed</span>
                                            <!-- /ko -->
                                            <!-- ko if: !extraTrainingInfo.completed -->
                                                <!-- ko if: extraTrainingInfo.numCompleted == 0 -->
                                                    <span class="lp_course_not_started"><span data-bind="text: LessonUsers.length"></span>
                                                        Lesson<span data-bind="if: (LessonUsers.length > 1)">s</span>
                                                    </span>
                                                <!-- /ko -->
                                                <!-- ko if: extraTrainingInfo.numCompleted != 0 -->
                                                    <span class="lp_course_part_completed"><span data-bind="text: extraTrainingInfo.numCompleted"></span>/<span data-bind="text: LessonUsers.length"></span> Lessons Complete</span>
                                                <!-- /ko -->
                                            <!-- /ko -->
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div data-bind="if: !extraTrainingInfo.expanded()">
                                                <button data-bind="click: expandTrainingData" type="button" class="btn btn-primary btn-sm lp_view_info_btn">View Info</button>
                                            </div>
                                            <div data-bind="if: extraTrainingInfo.expanded()">
                                                <button data-bind="click: collapseTrainingData" type="button" class="btn btn-primary btn-sm lp_hide_info_btn">
                                                    <span class="glyphicon glyphicon-remove"></span>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="lp_expansion_row">
                                            <div class="lp_expansion_indicator">
                                                <div data-bind="visible: !extraTrainingInfo.expanded()" class="arrow-up-hidden lp_expansion_centraliser"></div>
                                                <div data-bind="visible:  extraTrainingInfo.expanded()" class="arrow-up        lp_expansion_centraliser"></div>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                        </td>
                        <!-- /ko -->
                    </tr>
                </table>
            </div>
        </div>
        <div class="lp_expanded_course" data-bind="slideIn: expanded()">
            <div class="col-md-12" data-bind="with: current_training()">
                <div class="col-md-5">
                    <div class="col-md-6 pull-right">
                        <img class="lp_course_expanded_image" data-bind="src: imageName">
                    </div>
                </div>
                <div class="col-md-5">
                    <div class="row">
                        <div class="col-md-12 lp_course_expanded_name">
                            <span data-bind="text: Course.Summary"></span>
                        </div>
                        <div class="col-md-12 lp_course_expanded_description">
                            <p>
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                                Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
                                Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
                                Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                            </p>
                        </div>
                        <div class="col-md-12 lp_course_expanded_links">
                            <div class="col-md-3">
                                <a href="#"><span class="glyphicon glyphicon-new-window"></span> Live chat</a>
                            </div>
                            <div class="col-md-6">
                                <a href="#"><span class="glyphicon glyphicon-new-window"></span> Community chat</a>
                            </div>
                        </div>
                        <!-- ko foreach: LessonUsers -->
                        <div class="col-md-12 lp_course_expanded_lesson">
                            <div>
                                <div class="col-md-9">
                                    <table>
                                        <tr>
                                            <td>
                                                <span class="lp_course_expanded_lesson_title" data-bind="text: Lesson.Title"></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <!-- ko foreach: extraLessonInfo.stars -->
                                                    <!-- ko if: $data -->
                                                        <span class="glyphicon glyphicon-star lp_star_filled"></span>
                                                    <!-- /ko -->
                                                    <!-- ko if: !$data -->
                                                        <span class="glyphicon glyphicon-star-empty lp_star_empty"></span>
                                                    <!-- /ko -->
                                                <!-- /ko -->
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="col-md-3 lp_course_lesson_button_container">
                                    <!--(<span data-bind="text: extraLessonInfo.status"></span>)-->
                                    <!--(<span data-bind="text: extraLessonInfo.isOnline"></span>)-->
                                    <!-- ko if: extraLessonInfo.completed -->
                                        <button type="button" class="btn btn-default btn-sm lp_course_completed_btn" disabled="disabled">Completed</button>
                                    <!-- /ko -->
                                    <!-- ko if: extraLessonInfo.cancelled -->
                                        <button type="button" class="btn btn-default btn-sm lp_course_cancelled_btn" disabled="disabled">Cancelled</button>
                                    <!-- /ko -->
                                    <!-- ko if: extraLessonInfo.bookable -->
                                        <button type="button" class="btn btn-sm lp_course_bookable_btn" data-bind="click: bookLessonUser">Book</button>
                                    <!-- /ko -->
                                    <!-- ko if: extraLessonInfo.inprogress -->
                                        <button type="button" class="btn btn-sm lp_course_inprogress_btn" disabled="disabled">
                                            <span class="glyphicon glyphicon-ok"></span> Booked
                                        </button>
                                    <!-- /ko -->
                                </div>
                                <div class="col-md-12">
                                    <hr class="lp_course_expanded_lesson_divider">
                                </div>
                            </div>
                        </div>
                        <!-- /ko -->
                    </div>
                </div>
            </div>
        </div>
        </div>
        <!-- /ko -->
    </div>
    <!-- /ko -->

    <!--
    We have a blank footer row because it makes the sligein/slideout functionality work better;
    otherwise it can magically appear below the bottom of the currently visible screen.
     -->
    <div class="row lp_footer_bar">
        <div class="col-md-1 lp_footer_content">
        </div>
    </div>

    <script type="text/javascript">
        startup()
    </script>

</div>
</body>
</html>
